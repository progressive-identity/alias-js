<html>
    <head>
        <title>üîí Alias</title>


        <script type="application/javascript" src="jquery-3.4.1.min.js"></script>
        <script type="application/javascript" src="header.js"></script>
        <script type="application/javascript" src="sodium.js"></script>
        <script type="application/javascript" src="anychain.js"></script>
        <script type="application/javascript" src="alias.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

        <style>
            html, body {
                font-family: 'Roboto', sans-serif;
            }

        </style>
    </head>

    <body>
        <h1>üîí Home</h1>

        <div id="vue">
            <button v-on:click="logout">Logout</button>
            <button v-on:click="clear_identity">‚ö†Ô∏è Clear this identity</button>

            <div v-if="idty">
                <h2>Identity</h2>
                <ul>
                    <li>alias: <code>{{ idty.alias }}</code></li>
                    <li>anonymous alias: <code>{{ idty.anonymousAlias }}</code></li>
                    <li>public key: <code>{{ idty.publicKey }}</code></li>
                </ul>
            </div>

            <div v-if="view">
                <h2>Grants</h2>

                <ul>
                <li v-for="(byProvider, provider) in view">
                    Provider <code>{{ provider }}</code>
                    <ul>
                        <li v-for="(byPath, path) in byProvider">
                        Resource <code>{{ path }}</code>
                        <ul>
                            <li v-for="(byClient, client) in byPath">
                                <a :href="clients[client].body.url" target="_blank">
                                    {{ clients[client].body.name }}
                                </a>

                                (<a href="#" v-on:click="revokeClient(client)">revoke<span v-if="byClient.length>1"> all grants</span></a>,
                                <a href="#" v-on:click="displayClient(client)">read <span v-if="byClient.length>1">the {{byClient.length}}</span> contract<span v-if="byClient.length>1">s</span></a>)
                            </li>
                        </ul>
                    </ul>
                </ul>
            </div>


            <div v-if="storage">
                <h2>Storage</h2>
                <span v-for="(enabled, storageProvider) in storage">
                    <button v-if="!enabled" v-on:click="storageLink(storageProvider)">Link your {{ storageProvider }}</button>
                    <button v-if="enabled" v-on:click="storageUnlink(storageProvider)">Unlink your {{ storageProvider }}</button>
                </span>
            </div>
            <ul></ul>
        </div>

        <script type="application/javascript" src="index.js"></script>
    </body>
</html>
